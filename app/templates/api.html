{% extends 'base.html' %}

{% block content %}
<br>

<div class="container py-5">
    <h1 class="mb-4 text-primary">GET <code>/api/proxy/</code></h1>
    <p class="lead">Retrieve a list of available proxies with optional filtering and pagination.</p>

    <h2 class="mt-5">Query Parameters</h2>
    <ul class="list-group mb-4">
        <li class="list-group-item">
            <strong>country_code</strong> <span class="text-muted">(optional, <code>string</code>)</span><br>
            Filters proxies by country using a two-letter
            <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" target="_blank">ISO 3166-1 alpha-2</a> code.<br>
            <strong>Example:</strong> <code>country_code=FI</code>
        </li>
        <li class="list-group-item">
            <strong>protocol</strong> <span class="text-muted">(optional, <code>string</code>)</span><br>
            Filters by proxy protocol. Allowed values are: <code>HTTP</code>, <code>HTTPS</code>, <code>SOCKS4</code>,
            <code>SOCKS5</code>.<br>
            <strong>Example:</strong> <code>protocol=SOCKS5</code>
        </li>
        <li class="list-group-item">
            <strong>offset</strong> <span class="text-muted">(optional, <code>integer</code>)</span><br>
            Number of records to skip.<br>
            <strong>Default:</strong> <code>0</code> | <strong>Example:</strong> <code>offset=100</code>
        </li>
        <li class="list-group-item">
            <strong>limit</strong> <span class="text-muted">(optional, <code>integer</code>)</span><br>
            Maximum number of records to return.<br>
            <strong>Default:</strong> <code>100</code> | <strong>Example:</strong> <code>limit=50</code>
        </li>
    </ul>

    <h2>Response</h2>
    <p>Returns a JSON object containing the list of proxies and pagination metadata.</p>

    <h3>Example Response</h3>
    <pre class="bg-dark text-white p-3 rounded"><code>{
    "proxies":[
    {
        "ip": "37.27.93.250",
        "port": 3128,
        "protocol": "HTTP",
        "geoaddress": {
            "region": "Uusimaa",
            "city": "Helsinki",
            "country_iso_code": "FI"
        },
        "health": {
            "latency": 4490,
            "last_tested": "2025-04-21T15:02:10.667279Z"
        }
    }
    ],
    "total": 1,
    "limit": 100
}</code></pre>

    <h2 class="mt-5">Errors</h2>
    <div class="alert alert-warning">
        <strong>422 Unprocessable Entity</strong><br>
        Returned when one or more query parameters are invalid. This response is generated by <code>Pydantic</code>
        during validation.<br>
        Common causes include unsupported protocol values or incorrectly formatted country codes.
    </div>

    <h3>Example Error Response</h3>
    <pre class="bg-light border p-3 rounded"><code>{
    "detail": [
    {
        "loc": ["query", "protocol"],
        "msg": "value is not a valid enumeration member; permitted: 'HTTP', 'HTTPS', 'SOCKS4', 'SOCKS5'",
        "type": "type_error.enum"
    }
    ]
}</code></pre>
</div>

<div class="container py-5">
    <h1 class="mb-4 text-primary">GET <code>/api/country/</code></h1>
    <p class="lead">Returns a list of country codes (in <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2"
            target="_blank">ISO 3166-1 alpha-2</a> format) where proxies are currently available.</p>

    <h2>Query Parameters</h2>
    <p>This endpoint does not accept any query parameters.</p>

    <h2>Response</h2>
    <p>Returns a JSON array of two-letter country codes.</p>

    <h3>Example Response</h3>
    <pre class="bg-dark text-white p-3 rounded"><code>[
    "AR", "AT", "BD", "BI", "BR", "CN", "DE", "EC", "ES",
    "FI", "GB", "ID", "IN", "NL", "PH", "RU", "TR", "US", "VN"
]</code></pre>
</div>

{% endblock %}